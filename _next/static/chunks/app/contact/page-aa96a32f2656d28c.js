(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},6572:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var s=r(5155),a=r(2115),i=r(7168),n=r(3999);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});l.displayName="Input";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});o.displayName="Textarea";let c=(0,r(9946).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),d="6Le0-YwrAAAAAIx_k4LZfDdFL61oOQ4xxGZSS2WA".trim(),u=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,m=function(e){let t=(e||"").trim();return(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))&&(t=t.slice(1,-1)),t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/([^:]\/)\/+/g,"$1")}("https://portfolio-api-flax-iota.vercel.app/api/contact".trim()||"https://portfolio-api-flax-iota.vercel.app/api/contact"),f=[/;\s*$/m,/\b(function|const|let|var|class|import|export|return|if|else|for|while|try|catch)\b/,/[{][^}]*[}]/,/\bpublic\b|\bprivate\b|\bstatic\b/,/=>\s*[{(]/,/#include|using\s+namespace|printf\(|System\.out\.println|console\.log/];async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeoutMs:r=15e3,...s}=t,a=new AbortController,i=setTimeout(()=>a.abort(),r);try{let t=await fetch(e,{...s,signal:a.signal});if(t.ok)return t;if(429===t.status||t.status>=500&&t.status<600)return await new Promise(e=>setTimeout(e,600)),await fetch(e,{...s});return t}finally{clearTimeout(i)}}function g(){var e;let t=(0,a.useRef)(null),r=(0,a.useId)(),{ready:n,execute:g}=function(e,t){let[r,s]=(0,a.useState)(!1),i=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(!e||!t.current)return;let r=!1,a=()=>{if(r||i.current)return;let t=window;if(t.grecaptcha){t.grecaptcha.ready(()=>{r||(i.current=!0,s(!0))});return}let a="recaptcha-v3-script";if(document.getElementById(a))return;let n=document.createElement("script");n.id=a,n.src="https://www.google.com/recaptcha/api.js?render=".concat(encodeURIComponent(e)),n.async=!0,n.defer=!0,n.onload=()=>{let e=window.grecaptcha;e&&e.ready(()=>{r||(i.current=!0,s(!0))})},document.head.appendChild(n)},n=e=>{e&&!document.hidden&&a()},l=new IntersectionObserver(e=>{var t,r;return n(null!==(r=null===(t=e[0])||void 0===t?void 0:t.isIntersecting)&&void 0!==r&&r)},{root:null,threshold:.1});l.observe(t.current);let o=()=>{if(!t.current)return;let e=t.current.getBoundingClientRect();n(e.top<window.innerHeight&&e.bottom>0)};return document.addEventListener("visibilitychange",o,{passive:!0}),()=>{r=!0,l.disconnect(),document.removeEventListener("visibilitychange",o)}},[e,t]),{ready:r,execute:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact",r=window.grecaptcha;if(!r||!e)return"";try{return await r.execute(e,{action:t})||""}catch(e){return""}}}}(d,t),[x,h]=(0,a.useState)({name:"",email:"",message:"",website:""}),[b,v]=(0,a.useState)({}),[y,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),C=(0,a.useRef)(0),k=x.message.length,A=(0,a.useMemo)(()=>e=>{let t={},r=e.name.trim(),s=e.email.trim(),a=e.message;return r?r.length<2&&(t.name="Le nom est trop court (min. 2)."):t.name="Le nom est requis.",s?u.test(s)||(t.email="Format d’email invalide."):t.email="L’email est requis.",a.trim()?a.trim().length<6?t.message="Ton message est un peu court. Ajoute au moins ".concat(6," caract\xe8res."):a.length>1800?t.message="Ton message d\xe9passe ".concat(1800," caract\xe8res (").concat(a.length,"). Raccourcis-le."):function(e){let t=e.trim();return!!t&&(!!(t.includes("```")||/<\s*\/?\s*\w+[^>]*>/.test(t)||f.some(e=>e.test(t)))||(t.match(/[`{};<>()=]/g)||[]).length/Math.max(1,t.length)>.06)}(a)&&(t.message="\xc9vite de coller du code ici — explique plut\xf4t clairement ton besoin."):t.message="Le message est requis.",t},[]);function E(e){let{name:t,value:r}=e.target;if("message"===t){let e=r.length>1800?r.slice(0,1800):r;h(t=>e===t.message?t:{...t,message:e});return}h(e=>r===e[t]?e:{...e,[t]:r})}async function F(e){if(e.preventDefault(),y)return;let t=Date.now();if(t-C.current<2500)return;C.current=t;let r=A(x);if(v(r),Object.keys(r).length>0){N(null);return}if(w(!0),N(null),x.website.trim().length>0){N({type:"err",text:"\xc9chec de l’envoi (d\xe9tection bot)."}),w(!1);return}if(!d){N({type:"err",text:"reCAPTCHA non configur\xe9 c\xf4t\xe9 client."}),w(!1);return}if(!n){N({type:"err",text:"reCAPTCHA n’est pas pr\xeat, r\xe9essaie."}),w(!1);return}let s=await g("contact");if(!s){N({type:"err",text:"\xc9chec reCAPTCHA, r\xe9essaie."}),w(!1);return}try{let e=await p(m,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",cache:"no-store",timeoutMs:15e3,body:JSON.stringify({name:x.name.trim(),email:x.email.trim(),message:x.message.trim(),captcha:s,meta:{ua:"undefined"!=typeof navigator?navigator.userAgent:""}})}),t=null;try{t=await e.json()}catch(e){}if(!e.ok){if(null==t?void 0:t.fieldErrors){v(e=>({...e,...t.fieldErrors})),N({type:"err",text:"Merci de corriger les champs indiqu\xe9s."});return}let r=(null==t?void 0:t.error)||(401===e.status?"\xc9chec d’authentification reCAPTCHA.":"Erreur d’envoi (".concat(e.status,")"));throw Error(r)}N({type:"ok",text:(null==t?void 0:t.message)||"Message envoy\xe9, merci !"}),h({name:"",email:"",message:"",website:""}),v({})}catch(e){N({type:"err",text:(null==e?void 0:e.name)==="AbortError"?"Temps d\xe9pass\xe9. R\xe9essaie dans un instant.":(null==e?void 0:e.message)||"Erreur lors de l’envoi."})}finally{w(!1)}}let T=(null==j?void 0:j.type)==="err"&&0===Object.keys(b).length;return(0,s.jsx)("section",{ref:t,id:"contact-form",className:"bg-[#F5F5F5] text-[#111] py-24 px-6 overflow-hidden",children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-4xl",children:[(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("h2",{className:"text-4xl md:text-5xl font-extrabold tracking-tight leading-snug",children:"Laissez-moi un message"}),(0,s.jsx)("p",{className:"mt-6 text-[15px] md:text-base leading-relaxed text-neutral-700",children:"Donnez du contexte\xa0: objectifs, d\xe9lais, budget, inspirations. Je r\xe9ponds sous 24h ouvr\xe9es en moyenne."})]}),(0,s.jsxs)("form",{onSubmit:F,className:"mt-12 space-y-6 rounded-lg border border-neutral-300 p-6 md:p-8",noValidate:!0,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Nom"}),(0,s.jsx)(l,{id:"name",name:"name",type:"text",placeholder:"Ton nom",value:x.name,onChange:E,required:!0,autoComplete:"name",inputMode:"text","aria-invalid":!!b.name,"aria-describedby":b.name?"name-error":void 0,className:"focus-visible:ring-[#B4F116] ".concat(b.name?"border-red-500":""),disabled:y}),b.name&&(0,s.jsx)("p",{id:"name-error",className:"text-xs text-red-600","aria-live":"polite",children:b.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,s.jsx)(l,{id:"email",name:"email",type:"email",placeholder:"ton.email@exemple.fr",value:x.email,onChange:E,required:!0,autoComplete:"email",inputMode:"email","aria-invalid":!!b.email,"aria-describedby":b.email?"email-error":void 0,className:"focus-visible:ring-[#B4F116] ".concat(b.email?"border-red-500":""),disabled:y}),b.email&&(0,s.jsx)("p",{id:"email-error",className:"text-xs text-red-600","aria-live":"polite",children:b.email})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"message",className:"text-sm font-medium",children:"Message"}),(0,s.jsx)(o,{id:"message",name:"message",placeholder:"D\xe9cris ton besoin, le contexte, les contraintes…",value:x.message,onChange:E,required:!0,rows:7,"aria-invalid":!!b.message,"aria-describedby":b.message?"message-error":void 0,className:"focus-visible:ring-[#B4F116] ".concat(b.message?"border-red-500":""),disabled:y,maxLength:1800,autoCorrect:"off",autoCapitalize:"sentences",spellCheck:!0}),(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[(0,s.jsxs)("span",{className:"text-xs text-neutral-500","aria-live":"off",children:[k,"/",1800]}),b.message&&(0,s.jsx)("p",{id:"message-error",className:"text-xs text-red-600","aria-live":"polite",children:b.message})]})]}),(0,s.jsxs)("div",{className:"sr-only","aria-hidden":!0,children:[(0,s.jsx)("label",{htmlFor:r,children:"Site web"}),(0,s.jsx)("input",{id:r,name:"website",type:"text",value:x.website,onChange:E,autoComplete:"off",tabIndex:-1})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:gap-4",children:[(0,s.jsxs)(i.$,{type:"submit",disabled:y,className:"w-full bg-[#111] text-white hover:bg-[#111]/90 focus-visible:ring-[#B4F116] disabled:opacity-50 sm:w-auto",children:[(0,s.jsx)(c,{className:"mr-2 h-4 w-4"}),y?"Envoi...":"Envoyer"]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"En cliquant sur “Envoyer”, tu acceptes d’\xeatre recontact\xe9 par email."})]}),(T||(null==j?void 0:j.type)==="ok")&&(0,s.jsx)("div",{role:"status","aria-live":"polite",className:"text-sm ".concat((null==j?void 0:j.type)==="ok"?"text-green-700":"text-red-700"),children:null!==(e=null==j?void 0:j.text)&&void 0!==e?e:""})]})]})})}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(5155),a=r(2115),i=r(4624),n=r(2085),l=r(3999);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:n,className:r})),ref:t,...d})});c.displayName="Button"},8672:(e,t,r)=>{Promise.resolve().then(r.bind(r,6572))}},e=>{var t=t=>e(e.s=t);e.O(0,[497,441,684,358],()=>t(8672)),_N_E=e.O()}]);